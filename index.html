<!doctype html>
<html>
  <head>
    <script src="https://unpkg.com/vue"></script>

    <script>
      window.onload = function() {
        const data = {
          blocks: [ 'study japanese', 'email', 'mozilla/nsf', 'click me!', 'elusive index 4' ],
          schedule: [1, 0, 0, 4, 2, 2, 2],
          edittext: null,
        };
        Vue.component('block', {
          props: ['index'],
          template: `<div class=block contenteditable @input=input @focus=focus>{{ label }}</div>`,
          data() { return data },
          computed: {
            label() {
              return data.blocks[this.index];
            }
          },
          methods: {
            focus({target}) {
              data.edittext = target.textContent;
            },
            input({target}) {
              data.blocks = data.blocks.map(function(block) {
                if (block === data.edittext) {
                  return target.textContent;
                } else {
                  return block;
                }
              });
              data.edittext = target.textContent;
            },
          }
        });
        const app = new Vue({
          el: '#app',
          data: data,
        });
      }
    </script>
  </head>

  <body>
    <div id=app>
      <h2>schedule</h2>
      <block v-for="blockIndex in schedule" :index="blockIndex"></block>

      <h2>blocks</h2>
      <block v-for="(block, blockIndex) in blocks" :index="blockIndex"></block>
    </div>
  </body>
</html>
